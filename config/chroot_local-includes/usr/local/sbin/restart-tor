#!/bin/sh

set -e

service tor restart

# The main point of this script is to make sure that if vidalia is
# running, and Tor is restarted, then we also restart Vidalia. This is
# because Vidalia doesn't re-connect to Tor automatically, so the user
# has to restart it to be able to control Tor again. Also, any options
# set by Vidalia will be lost since they weren't written to torrc.
if pgrep "\<vidalia\>" >/dev/null; then
    restart-vidalia
fi
